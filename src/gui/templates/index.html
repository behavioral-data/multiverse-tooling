<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Universe to Template Diff</title>
    <link type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        rel="stylesheet" />
    <link type="text/css" href="/dist/monaco.css" rel="stylesheet" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body class="h-100" style="overflow: hidden;">
    <div class="container-fluid h-100">
        
        <div class="row">
            <div class="col">
                <div class="col">
                    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="true" style="width: 100%; position: relative; top: 0; left: 0;">
                        <div class="toast-body" id="toast-message" style="width: 100%;">
                        </div>
                      </div>
                </div>
            </div>
            <div class="col">
                <div class="btn-toolbar justify-content-end">
                    <div class="btn-group mr-2" role="group" aria-label="Controls">
                        <button type="button" class="btn btn-default btn-success universe-mode" id="button-universe">Universe Mode</button>
                        <button type="button" class="btn btn-default btn-secondary template-mode" id="button-template">Template Mode</button>
                        <button type="button" class="btn btn-default btn-secondary edit-mode" id="button-edit">Edit Mode</button>
                        <form method="POST" action="/save-editor">
                            <button type="button" class="btn btn-default btn-primary" id="button-save" onClick="sendDataToBackendAjax(event)" style="display: none;">Save</button>
                        </form>
                    </div>
                    <div class="btn-group mr-2">
                            <button class="btn btn-primary" id="legend"
                            data-bs-container="body" data-bs-toggle="popover" data-bs-placement="bottom"
                            data-bs-html="true"
                            data-bs-content="<span class=&quot;deleted&quot;>&nbsp;&nbsp;</span> deleted<br><span class=&quot;inserted&quot;>&nbsp;&nbsp;</span> inserted<br><span class=&quot;moved&quot;>&nbsp;&nbsp;</span> moved<br><span class=&quot;updated&quot;>&nbsp;&nbsp;</span> updated<br>">
                            Legend</button>
                            <!-- <button
                            class="btn btn-primary btn-sm" id="shortcuts" data-bs-toggle="popover"
                            data-bs-placement="bottom" data-bs-html="true"
                            data-bs-content="<b>q</b> quit<br><b>l</b> list<br><b>t</b> top<br><b>b</b> bottom">Shortcuts</button> -->
                    </div>
                    <!-- <div class="btn-group"><a class="btn btn-default btn-sm btn-primary" href="/list">Back</a><a
                            class="btn btn-default btn-sm btn-danger" href="/quit">Quit</a></div> -->
                </div>
            </div>
        </div>
        <div class="row mt-3">

        </div>
        <div class="row h-100" style="overflow: hidden;">
            <div class="col-4 h-100 sidebar" id="old-universe">
                <h5 style="display:inline;">Old Universe </h5> <h6 style="display:inline;">(Read only)</h6>
                <!-- <h5>{{new_universe_fname}}</h5> -->
                <div id="old-universe-container" style="height: calc(100% - 100px); border:1px solid grey;"></div>
            </div>
            <div class="col-4 h-100 sidebar" id="new-universe">
                <h5 style="display:inline;">{{new_universe_fname}}</h5> <h6 style="display:inline;">(Read only)</h6>
                <div id="new-universe-container" style="height: calc(100% - 100px); border:1px solid grey;"></div>
            </div>
            <div class="col-4 h-100 content" id="old-template">
                <h5 style="display:inline;">{{old_template_name}}</h5> <h6 style="display:inline;">(Read only)</h6>
                <div id="old-template-container" style="height: calc(100% - 100px); border:1px solid grey;"></div>
            </div>
            <div class="col-4 h-100 content collapsed" id="new-template">
                <h5 style="display:inline;">{{new_template_name}}</h5> <h6 style="display:inline;">(Read only)</h6>
                <div id="new-template-container" style="height: calc(100% - 100px); border:1px solid grey;"></div>
            </div>
            <div class="col-4 h-100 sidebar collapsed" id="editor-right">
                <h5 style="display:inline;">Editor</h5> <h6 style="display:inline;">(Editable, copy of new template)</h6>
                <div id="editor-container" style="height: calc(100% - 100px); border:1px solid grey;"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">/*<![CDATA[*/{{ js_config | safe}}/*]]>*/</script>
    <script type="text/javascript" src="/web/monaco-editor/min/vs/loader.js"></script>
    <script type="text/javascript" src="/dist/monaco.js"></script>
    <script type="text/javascript" src="/dist/shortcuts.js"></script>
    <script>
        $(document).ready(function () {
            $(".universe-mode").click(function () {
                var old_universe = $("#old-universe"),
                    new_universe = $("#new-universe");
                    new_template = $('#new-template');
                    editor_right =  $('#editor-right');

                old_universe.removeClass("collapsed");
                new_universe.removeClass("collapsed");
                new_template.addClass("collapsed");
                editor_right.addClass("collapsed");

                var button_universe = $("#button-universe");
                button_universe.removeClass("btn-secondary").addClass("btn-success");
                var button_template = $("#button-template");
                button_template.removeClass("btn-success").addClass("btn-secondary");
                var button_edit = $("#button-edit");
                button_edit.removeClass("btn-success").addClass("btn-secondary");

                var button_save = document.getElementById("button-save");
                button_save.style.display = "none";
                // if (elem.innerText=="View Mode") elem.innerText = "Edit Mode";
                // else elem.innerText = "View Mode";
                // return false;
            });

            $(".template-mode").click(function () {
                var old_universe = $("#old-universe"),
                    new_universe = $("#new-universe");
                    new_template = $('#new-template');
                    editor_right =  $('#editor-right');

                old_universe.addClass("collapsed");
                new_universe.removeClass("collapsed");
                new_template.removeClass("collapsed");
                editor_right.addClass("collapsed");

                var button_universe = $("#button-universe");
                button_universe.removeClass("btn-success").addClass("btn-secondary");
                var button_template = $("#button-template");
                button_template.removeClass("btn-secondary").addClass("btn-success");
                var button_edit = $("#button-edit");
                button_edit.removeClass("btn-success").addClass("btn-secondary");

                var button_save = document.getElementById("button-save");
                button_save.style.display = "none";
            });

            $(".edit-mode").click(function () {
                var old_universe = $("#old-universe"),
                    new_universe = $("#new-universe");
                    new_template = $('#new-template');
                    editor_right =  $('#editor-right');

                old_universe.addClass("collapsed");
                new_universe.addClass("collapsed");
                new_template.removeClass("collapsed");
                editor_right.removeClass("collapsed");

                var button_universe = $("#button-universe");
                button_universe.removeClass("btn-success").addClass("btn-secondary");
                var button_template = $("#button-template");
                button_template.removeClass("btn-success").addClass("btn-secondary");
                var button_edit = $("#button-edit");
                button_edit.removeClass("btn-secondary").addClass("btn-success");

                var button_save = document.getElementById("button-save");
                button_save.style.display = "block";
            });
        });
	</script>
</body>

</html>